(()=>{var e={};e.id=165,e.ids=[165],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},2626:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,originalPathname:()=>c,pages:()=>D,routeModule:()=>g,tree:()=>a});var o=r(482),s=r(9108),n=r(2563),i=r.n(n),l=r(8300),u={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>l[e]);r.d(t,u);let a=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8828)),"/workspaces/nextjs-hqe9dcff/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],D=[],c="/_not-found",d={require:r,loadChunk:()=>Promise.resolve()},g=new o.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},9400:(e,t,r)=>{Promise.resolve().then(r.bind(r,380))},5472:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},380:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ClientAuthProvider:()=>d,default:()=>p,useAuth:()=>g});var o=r(5344),s=r(3729),n=r(6300),i=r(8428);console.log("\uD83D\uDD0D DEBUG: ClientAuthProvider file loaded at:",new Date().toISOString());let l="https://hfrzxhbwjatdnpftrdgr.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhmcnp4aGJ3amF0ZG5wZnRyZGdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5NTY3NzksImV4cCI6MjA2ODUzMjc3OX0.Fg7TK4FckPi5XAWNM_FLii9WyzSDAUCSdyoX-WLLXhA";u||(console.error("\uD83D\uDEA8 ERROR: NEXT_PUBLIC_SUPABASE_ANON_KEY not found in environment variables!"),console.error("\uD83D\uDD27 Please set NEXT_PUBLIC_SUPABASE_ANON_KEY in Vercel environment variables")),console.log("\uD83D\uDD0D DEBUG: Environment Variables Config:"),console.log("\uD83D\uDD0D DEBUG: - URL:",l),console.log("\uD83D\uDD0D DEBUG: - Key length:",u.length),console.log("\uD83D\uDD0D DEBUG: - Key starts with:",u.substring(0,20)),console.log("\uD83D\uDD0D DEBUG: - Using env vars:",!!u);let a=(0,n.eI)(l,u);console.log("\uD83D\uDD0D DEBUG: Supabase client created");let D=(0,s.createContext)(void 0),c=()=>null;function d({children:e}){let t=(0,i.useRouter)(),r=(0,i.usePathname)(),n=c();console.log("\uD83D\uDD0D DEBUG: Initial auth from storage:",!!n);let[l,u]=(0,s.useState)(n?.user||null),[d,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(!n),h=async e=>{console.log("\uD83D\uDD0D DEBUG: fetchUserProfile for",e);try{let{data:t,error:r}=await a.from("profiles").select("*").eq("id",e).maybeSingle();if(r)throw r;if(t)return t}catch(e){console.error("\uD83D\uDD0D DEBUG: Error fetching profile:",e)}return{id:e,email:n?.user?.email||"",full_name:n?.user?.user_metadata?.full_name||"",avatar_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}},m=async(e,t)=>{if(l)try{await a.from("user_activity_log").insert({user_id:l.id,activity_type:e,activity_data:t,ip_address:null,user_agent:null})}catch(e){console.error("\uD83D\uDD0D DEBUG: Error logging activity:",e)}};(0,s.useEffect)(()=>{console.log("\uD83D\uDD0D DEBUG: AuthProvider mounted");let e=!0,o=setTimeout(()=>{e&&p&&(console.log("\uD83D\uDEA8 DEBUG: Loading timeout, forcing loading=false"),f(!1))},15e3);(async()=>{console.log("\uD83D\uDD0D DEBUG: getSession");try{let{data:{session:t},error:r}=await a.auth.getSession();if(r)throw r;if(t?.user){u(t.user);let r=await h(t.user.id);if(!e)return;g(r)}else if(n?.user){u(n.user);let t=await h(n.user.id);if(!e)return;g(t)}else localStorage.removeItem("sb-hfrzxhbwjatdnpftrdgr-auth-token"),u(null)}catch(e){console.error("\uD83D\uDD0D DEBUG: init error:",e)}finally{e&&f(!1),clearTimeout(o)}})();let{data:{subscription:s}}=a.auth.onAuthStateChange(async(s,n)=>{if(console.log("\uD83D\uDD0D DEBUG: onAuthStateChange",s),n?.user){u(n.user);let o=await h(n.user.id);e&&g(o),"SIGNED_IN"===s&&"/dashboard"!==r&&t.push("/dashboard"),"SIGNED_IN"===s&&await m("login")}else u(null),g(null);e&&f(!1),clearTimeout(o)});return()=>{e=!1,s.unsubscribe(),clearTimeout(o)}},[t,r]);let x=async(e,t,r)=>{console.log("\uD83D\uDD0D DEBUG: signUp called for email:",e),f(!0);try{let{data:o,error:s}=await a.auth.signUp({email:e,password:t,options:{emailRedirectTo:void 0,data:{full_name:r||""}}});if(s)throw s;return console.log("\uD83D\uDD0D DEBUG: signUp successful:",o),{data:o,error:null}}catch(e){return console.error("\uD83D\uDD0D DEBUG: Sign up error:",e),{data:null,error:e.message}}finally{f(!1)}},y=async(e,t)=>{console.log("\uD83D\uDD0D DEBUG: signIn called for email:",e),f(!0);try{let{data:r,error:o}=await a.auth.signInWithPassword({email:e,password:t});if(o)throw o;return console.log("\uD83D\uDD0D DEBUG: signIn successful:",r),{data:r,error:null}}catch(e){return console.error("\uD83D\uDD0D DEBUG: Sign in error:",e),{data:null,error:e.message}}finally{f(!1)}},E=async()=>{console.log("\uD83D\uDD0D DEBUG: signOut called"),f(!0),l&&await m("logout");try{let{error:e}=await a.auth.signOut();if(e)throw e;console.log("\uD83D\uDD0D DEBUG: signOut successful")}catch(e){console.error("\uD83D\uDD0D DEBUG: signOut error:",e)}finally{u(null),g(null),f(!1)}},_=async e=>{if(console.log("\uD83D\uDD0D DEBUG: updateProfile called:",e),!l||!d)throw Error("No user logged in");f(!0);try{let{data:t,error:r}=await a.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",l.id).select().single();if(r)throw r;return g(t),await m("profile_update",e),console.log("\uD83D\uDD0D DEBUG: updateProfile successful:",t),{data:t,error:null}}catch(e){return console.error("\uD83D\uDD0D DEBUG: Update profile error:",e),{data:null,error:e.message}}finally{f(!1)}},v=async()=>{if(console.log("\uD83D\uDD0D DEBUG: refreshProfile called"),l)try{let e=await h(l.id);g(e),console.log("\uD83D\uDD0D DEBUG: Profile refreshed")}catch(e){console.error("\uD83D\uDD0D DEBUG: Error refreshing profile:",e)}},P=!!l?.email_confirmed_at;return o.jsx(D.Provider,{value:{user:l,userProfile:d,loading:p,isEmailVerified:P,signUp:x,signIn:y,signOut:E,updateProfile:_,refreshProfile:v,logActivity:m},children:e})}function g(){let e=(0,s.useContext)(D);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}let p=d},8828:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var o=r(5036),s=r(8592),n=r.n(s);r(7272);var i=r(6843);let l=(0,i.createProxy)(String.raw`/workspaces/nextjs-hqe9dcff/app/ClientAuthProvider.tsx`),{__esModule:u,$$typeof:a}=l,D=l.default;(0,i.createProxy)(String.raw`/workspaces/nextjs-hqe9dcff/app/ClientAuthProvider.tsx#ClientAuthProvider`),(0,i.createProxy)(String.raw`/workspaces/nextjs-hqe9dcff/app/ClientAuthProvider.tsx#useAuth`);let c={title:"Rating Sistemi",description:"GiriÅŸimci ve yatÄ±rÄ±mcÄ± deÄŸerlendirme platformu"};function d({children:e}){return o.jsx("html",{lang:"tr",children:(0,o.jsxs)("body",{className:n().className,children:[o.jsx("script",{dangerouslySetInnerHTML:{__html:`console.log("ðŸŒ± RootLayout y\xfcklendi");`}}),o.jsx(D,{children:e})]})})}},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,307],()=>r(2626));module.exports=o})();